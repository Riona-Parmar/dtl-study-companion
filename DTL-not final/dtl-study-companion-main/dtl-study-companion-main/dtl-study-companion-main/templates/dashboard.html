{% extends "base.html" %}
{% block content %}

<style>
.dashboard-title{
    font-size:28px;
    font-weight:700;
    margin-bottom:6px;
}

.dashboard-sub{
    color:#64748b;
    margin-bottom:24px;
}

/* CARD */
.card{
    background:white;
    border-radius:16px;
    padding:24px;
    box-shadow:0 10px 30px rgba(0,0,0,0.08);
    margin-bottom:30px;
    max-width:700px;
}

/* FORM */
.form-group{
    margin-bottom:14px;
}

label{
    font-weight:600;
    font-size:14px;
}

input{
    width:100%;
    padding:10px;
    border-radius:10px;
    border:1px solid #cbd5f5;
    font-size:14px;
}

button{
    background:#2563eb;
    color:white;
    border:none;
    padding:10px 18px;
    border-radius:10px;
    font-size:14px;
    cursor:pointer;
}

/* TABLE */
table{
    width:100%;
    border-collapse:collapse;
    margin-top:14px;
}

th, td{
    padding:12px;
    text-align:left;
    font-size:14px;
}

th{
    background:#f1f5f9;
}

tr:not(:last-child){
    border-bottom:1px solid #e5e7eb;
}

.delete-btn{
    background:#ef4444;
    padding:6px 12px;
    border-radius:8px;
    font-size:12px;
}
</style>

<!-- TITLE -->
<div class="dashboard-title">üìä Dashboard</div>
<div class="dashboard-sub">
    Create and manage your study timetable starting from a selected date.
</div>

<!-- TIMETABLE CARD -->
<div class="card">
    <h3>üìÖ Study Timetable</h3>

    <div class="form-group">
        <label>Subject</label>
        <input id="subject" placeholder="e.g. Operating Systems">
    </div>

    <div class="form-group">
        <label>Start Date</label>
        <input id="date" type="date">
    </div>

    <div class="form-group">
        <label>Start Time</label>
        <input id="start" type="time">
    </div>

    <div class="form-group">
        <label>End Time</label>
        <input id="end" type="time">
    </div>

    <button onclick="addSession()">‚ûï Add Session</button>
</div>

<!-- SCHEDULED TABLE -->
<div class="card">
    <h3>‚è∞ Scheduled Study Sessions</h3>

    <table>
        <thead>
            <tr>
                <th>Subject</th>
                <th>Date</th>
                <th>Start</th>
                <th>End</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
</div>

<script>
let sessions = JSON.parse(localStorage.getItem("sessions")) || [];

function render(){
    const body = document.getElementById("tableBody");
    body.innerHTML = "";

    sessions.forEach((s,i)=>{
        body.innerHTML += `
        <tr>
            <td>${s.subject}</td>
            <td>${s.date}</td>
            <td>${s.start}</td>
            <td>${s.end}</td>
            <td>
                <button class="delete-btn" onclick="del(${i})">Delete</button>
            </td>
        </tr>`;
    });
}

function addSession(){
    const subject = document.getElementById("subject").value;
    const date = document.getElementById("date").value;
    const start = document.getElementById("start").value;
    const end = document.getElementById("end").value;

    if(!subject || !date || !start || !end){
        alert("Fill all fields");
        return;
    }

    sessions.push({subject,date,start,end});
    localStorage.setItem("sessions", JSON.stringify(sessions));
    render();
}

function del(i){
    sessions.splice(i,1);
    localStorage.setItem("sessions", JSON.stringify(sessions));
    render();
}

render();
</script>

{% endblock %}
